(this.webpackJsonpralph=this.webpackJsonpralph||[]).push([[9,16],{175:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var n=t(0),r=t.n(n);const s=({size:e,bp:a="sm",children:t,className:n=""})=>r.a.createElement("div",{className:`col-${a}-${e} ${n}`},t);a.b=s},176:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var n=t(0),r=t.n(n);const s=({className:e="",children:a})=>r.a.createElement("div",{className:`row ${e}`},a);a.b=s},194:function(e,a,t){var n=t(52),r=t(198),s=t(207),i=t(180);e.exports=function(e,a){return(i(e)?n:s)(e,r(a,3))}},207:function(e,a,t){var n=t(217),r=t(81);e.exports=function(e,a){var t=-1,s=r(e)?Array(e.length):[];return n(e,(function(e,n,r){s[++t]=a(e,n,r)})),s}},208:function(e,a,t){var n=t(205),r=t(216),s=n((function(e,a,t){return e+(t?" ":"")+r(a)}));e.exports=s},219:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(228),r=t.n(n),s=t(0),i=t(24),l=t(18),c=t(14),m=t(183),o=t(25);const u=r()(e=>Object(l.a)(void 0)),d=e=>{const a=u(e),t=Object(m.a)().initiateRequest,n=()=>{Object(c.a)(e).then(e=>{a.next(e)})},r=a=>(r,s,i)=>{return t(a(e,r),i,()=>{n(),s()})};Object(s.useEffect)(n,[]);const l=Object(s.useMemo)(Object(o.a)(a),[a]);return{resource:Object(i.useSubscription)(l),GET:n,POST:r(c.d),PUT:r(c.e),PATCH:r(c.c),DELETE:r(c.b)}}},220:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var n=t(0),r=t.n(n),s=t(194),i=t.n(s),l=t(7),c=t.n(l),m=t(2),o=(t(252),t(188)),u=t(186),d=t(200);const E=Object(m.a)("object-history"),b=({endpoint:e})=>r.a.createElement(d.a,{endpoint:e},e=>r.a.createElement("div",{className:E(),"data-testid":"object-history"},i()(e.history.content,e=>r.a.createElement(c.a,{key:e.lastModified},r.a.createElement(l.AUcardInner,null,r.a.createElement(u.a,{textLabel:"Entity Type"},e.entityType),r.a.createElement(u.a,{textLabel:"Entity Unique Name"},e.entityUniqueName),r.a.createElement(u.a,{textLabel:"Revision"},e.revision),r.a.createElement(u.a,{textLabel:"Revision Type"},e.revisionType),r.a.createElement(u.a,{textLabel:"Last Modified"},Object(o.a)(e.lastModified)),r.a.createElement(u.a,{textLabel:"Changes"},e.changes.map((e,a)=>r.a.createElement("div",{key:a},e))))))))},224:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(6),i=t(10),l=t(11),c=t(189),m=t(218),o=t(186),u=t(194),d=t.n(u),E=t(208),b=t.n(E),f=t(180),p=t.n(f),w=t(182);const g=({id:e})=>{const a=Object(w.a)(`${m.a.TransactionLogs}/${e}`).response;if(void 0===a)return null;const t=a;return r.a.createElement("main",null,r.a.createElement("div",null,r.a.createElement(l.a,null,"Transaction Details"),d()(t.transactionLog,(e,a)=>r.a.createElement(o.a,{textLabel:b()(a)},e))),r.a.createElement("div",null,r.a.createElement(l.a,null,"Changes"),t.changes.map(e=>r.a.createElement("div",null,d()(e,(e,a)=>p()(e)?r.a.createElement(o.a,{textLabel:b()(a)},d()(e,e=>r.a.createElement("div",null,e))):r.a.createElement(o.a,{textLabel:b()(a)},e))))))};var O=t(16),h=t.n(O);a.default=({endpoint:e,match:a,searchOptions:t})=>{const n=[{title:"Timestamp",key:"timestamp"},{title:"User Email",key:"userEmail"},{title:"Command",key:"command"},{title:"View",render:({id:e})=>r.a.createElement(h.a,{linkComponent:s.a,link:`${a.url}/${e}`},"View Details")}];return r.a.createElement(i.d,null,r.a.createElement(i.b,{path:`${a.path}/:id`,render:e=>r.a.createElement(g,Object.assign({id:e.match.params.id},e))}),r.a.createElement(i.b,{render:()=>r.a.createElement("main",null,r.a.createElement(l.a,null,"Transaction Logs"),r.a.createElement(c.a,{endpoint:e,columns:n,searchOptions:t}))}))}},248:function(e,a,t){"use strict";t.d(a,"a",(function(){return E}));var n=t(0),r=t.n(n),s=t(176),i=t(175),l=t(11),c=t(186),m=t(16),o=t.n(m),u=t(46),d=t(188);const E=({isMyProfile:e=!1,user:a})=>r.a.createElement(s.b,null,r.a.createElement(i.b,{size:4},r.a.createElement(l.a,null,"User details"),r.a.createElement(o.a,{onClick:u.a},"Edit")),r.a.createElement(i.b,{size:5},r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{textLabel:"Full name"},a.firstname," ",a.surname),r.a.createElement(c.a,{textLabel:"Username"},a.username),r.a.createElement(c.a,{textLabel:"Email"},a.email),r.a.createElement(c.a,{textLabel:"Default Organisation"},a.defaultOrganisationName),!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{textLabel:"Failed Login Count"},a.failedLoginCount),r.a.createElement(c.a,{textLabel:"Failed MFA Count"},a.failedMFACount)),a.previousLoginTimestamp&&r.a.createElement(c.a,{textLabel:"Previous Login Time"},Object(d.a)(a.previousLoginTimestamp)),a.lastUpdateUserName&&r.a.createElement(c.a,{textLabel:"Last updated by"},a.lastUpdateUserName," (",a.lastUpdateUserEmail,")"))))},249:function(e,a,t){"use strict";t.d(a,"a",(function(){return v}));var n=t(28),r=t(16),s=t.n(r),i=t(48),l=t(179),c=t(0),m=t.n(c),o=t(185),u=t(47),d=t(184),E=t(175),b=t(11),f=t(176),p=t(22),w=t(46),g=t(219),O=t(178);const h=o.object().shape({firstname:o.string().required("First name is required"),surname:o.string().required("Surname is required"),email:o.string().required("Email is required")}),v=({userId:e})=>{const a=`${O.b.Users}/${e}`,t=Object(g.a)(a),r=t.resource,o=t.PUT,v=Object(c.useState)(""),j=Object(n.a)(v,2),L=j[0],P=j[1],y=Object(p.a)().authDetails;if(void 0===r)return null;return m.a.createElement(l.e,{initialValues:{id:r.id,expectedVersion:r.version,firstname:r.firstname,surname:r.surname,email:r.email,defaultOrganisationId:r.defaultOrganisationId},onSubmit:e=>{o({id:e.id,expectedVersion:e.expectedVersion,firstname:e.firstname,surname:e.surname,email:e.email,defaultOrganisationId:e.defaultOrganisationId},()=>{Object(w.b)(),Object(w.b)()},e=>{P(e.message)})},validationSchema:h},()=>m.a.createElement(f.b,null,m.a.createElement(E.b,{size:4},m.a.createElement(b.a,null,"User details"),m.a.createElement(s.a,{onClick:()=>{Object(w.b)()}},"Cancel")),m.a.createElement(E.b,{size:5},m.a.createElement(l.d,null,m.a.createElement(d.a,{textLabel:"First name",name:"firstname"}),m.a.createElement(d.a,{textLabel:"Last name",name:"surname"}),m.a.createElement(d.a,{textLabel:"Email",name:"email"}),y.userId===r.id&&m.a.createElement("div",{className:"au-form-group"},m.a.createElement(i.AUlabel,{htmlFor:"defaultOrganisation",text:"Default Organisation"}),m.a.createElement(l.b,{as:"select",id:"defaultOrganisation",className:"au-select",name:"defaultOrganisationId"},r.organisations.map(e=>m.a.createElement("option",{key:e.organisationId,value:e.organisationId},e.organisationName)))),m.a.createElement(u.a,{message:L}),m.a.createElement(s.a,{type:"submit"},"Save")))))}},250:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var n=t(0),r=t.n(n),s=t(176),i=t(175),l=t(11);const c=({organisations:e})=>r.a.createElement(s.a,null,r.a.createElement(i.a,{size:4},r.a.createElement(l.a,null,"Organisations")),r.a.createElement(i.a,{size:8},e.map(e=>r.a.createElement("div",{key:e.organisationId},e.organisationName))))},251:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var n=t(0),r=t.n(n),s=t(176),i=t(175),l=t(11),c=t(220),m=t(178),o=t(1);const u=({userId:e})=>r.a.createElement(s.b,null,r.a.createElement(i.b,{size:4},r.a.createElement(l.a,null,"History")),r.a.createElement(i.b,{size:5},r.a.createElement(c.a,{endpoint:`${m.b.Users}/${e}/${o.b.History}`})))},252:function(e,a,t){},434:function(e,a,t){},462:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(22),i=t(10),l=t(178),c=t(248),m=t(249),o=t(28),u=t(176),d=t(175),E=t(11),b=t(179),f=t(185),p=t(32),w=t.n(p),g=t(79),O=t.n(g),h=t(184),v=t(16),j=t.n(v),L=t(183),P=t(14),y=t(47),x=t(50),C=t(46);var N;!function(e){e.CurrentPassword="currentPassword",e.NewPassword="newPassword",e.ConfirmNewPassword="confirmNewPassword"}(N||(N={}));const $=f.object().shape({[N.CurrentPassword]:f.string().required(),[N.NewPassword]:f.string().matches(/^.{14,}$/,"Must contain at least 14 characters").required("New password is required"),[N.ConfirmNewPassword]:f.string().oneOf([f.ref("newPassword"),null],"Password must match").required("Confirm new password is required")}),U=({user:e})=>{const a=Object(n.useState)(""),t=Object(o.a)(a,2),s=t[0],i=t[1],c=Object(n.useState)(""),m=Object(o.a)(c,2),f=m[0],p=m[1],g=Object(L.a)().initiateRequest;return r.a.createElement(u.a,null,r.a.createElement(d.a,{size:4},r.a.createElement(E.a,null,"Change password")),r.a.createElement(d.a,{size:5},r.a.createElement(b.e,{initialValues:{[N.CurrentPassword]:"",[N.NewPassword]:"",[N.ConfirmNewPassword]:""},onSubmit:(a,{resetForm:t})=>{i(""),p("");const n=Object(P.c)(`${l.b.Users}/${e.id}/password`,{id:e.id,[N.CurrentPassword]:a[N.CurrentPassword],[N.NewPassword]:a[N.NewPassword]});g(n,e=>{i(e.message),Object(C.b)()},()=>{p("Password has been changed"),t(),Object(C.b)()})},validationSchema:$},()=>r.a.createElement(b.d,null,r.a.createElement(w.a,{as:"info"},r.a.createElement(E.a,null,"Important"),r.a.createElement("ul",null,r.a.createElement("li",null,"Passwords for this system should be unique and not reused from any other system."),r.a.createElement("li",null,"Passwords must be a minimum of 14 characters. Ideally as 4 random words."))),r.a.createElement(h.a,{name:N.CurrentPassword,textLabel:"Current Password","aria-label":"Enter new password",as:O.a,type:"password"}),r.a.createElement(h.a,{name:N.NewPassword,textLabel:"New Password","aria-label":"Enter new password",as:O.a,type:"password"}),r.a.createElement(h.a,{name:N.ConfirmNewPassword,textLabel:"Confirm New Password","aria-label":"Confirm new password",as:O.a,type:"password"}),r.a.createElement(x.a,{message:f}),r.a.createElement(y.a,{message:s}),r.a.createElement(j.a,{"data-testid":"submit-btn",type:"submit"},"Change Password")))))};var I=t(2),T=(t(434),t(250)),q=t(182),k=t(251),F=t(224);const z=Object(I.a)("my-profile");a.default=e=>{const a=Object(s.a)().authDetails,t=Object(q.a)(`${l.b.Users}/${a.userId}`).response;return void 0===t?null:r.a.createElement("main",{className:z()},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:`${e.match.path}/edit`,render:e=>r.a.createElement(m.a,Object.assign({userId:t.id},e))}),r.a.createElement(i.b,{render:e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,Object.assign({isMyProfile:!0,user:t},e)))})),r.a.createElement(T.a,{organisations:t.organisations}),r.a.createElement(U,{user:t}),r.a.createElement(k.a,{userId:t.id}),r.a.createElement(F.default,Object.assign({endpoint:`${l.b.Users}/${t.id}/transactions`,searchOptions:[{value:"searchCommand",text:"Command"}]},e)))}}}]);
//# sourceMappingURL=9.970b3b40.chunk.js.map