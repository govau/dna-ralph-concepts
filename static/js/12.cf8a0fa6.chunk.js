(this.webpackJsonpralph=this.webpackJsonpralph||[]).push([[12],{175:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),c=a.n(n);const l=({size:e,bp:t="sm",children:a,className:n=""})=>c.a.createElement("div",{className:`col-${t}-${e} ${n}`},a);t.b=l},176:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),c=a.n(n);const l=({className:e="",children:t})=>c.a.createElement("div",{className:`row ${e}`},t);t.b=l},407:function(e,t,a){},408:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){},460:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(10),r=a(1),i=a(28),o=a(19),s=a(79),m=a.n(s),u=a(16),d=a.n(u),b=a(48),h=a(179),E=a(185),p=a(14),g=a(46),O=a(17),S=a(11),f=a(29),j=a(184),y=a(18);const M=Object(y.a)({multifactorSetupRequired:null,allowedMultifactorMethods:[],configuredMultifactorMethods:[],webauthnChallenge:null,selectedMultiFactorForSigningIn:{id:"",name:"",methodType:"",isDefault:!1},smsChallengeId:""});var C=a(24),T=a(25);const w=()=>{const e=Object(n.useMemo)(Object(T.a)(M),[M]);return{multifactor:Object(C.useSubscription)(e),firstFactorLoginSuccess:e=>M.next(Object(o.a)({},M.getValue(),{},e)),setSelectedMultifactorOption:e=>{M.next(Object(o.a)({},M.getValue(),{selectedMultiFactorForSigningIn:e}))}}};var A=a(23),x=a(181),v=a(242);var k=a(47),F=a(243),L=a(57);const R={webauthn:{hint:e=>`Insert your FIDO device with name: ${e} to sign in.`,loginfn:e=>(e=>Object(p.g)(O.a.CommenceChallengeFido,{webauthnMFAId:e}).then(({webauthnChallenge:e})=>{const t=JSON.parse(e).publicKeyCredentialRequestOptions;return Object(v.b)({publicKey:Object(o.a)({},t,{extensions:void 0,allowCredentials:[{type:"public-key",id:t.allowCredentials[0].id}]})})}))(e).then(e=>Object(p.h)(O.a.CompleteChallengeFido,{publicKeyCredential:Object(o.a)({},e,{rawId:void 0})}))},totp:{hint:e=>`Enter your Time-based One Time Password from device ${e}.`,loginfn:(e,t)=>Object(p.g)(O.a.ValidateTotp,{id:e,code:t}).then(e=>e)},sms:{hint:(e,t)=>`A SMS code has been sent to ${e} with ID ${t}. Enter the code to sign in.`,loginfn:(e,t)=>Object(p.g)(O.a.CompleteChallengeSMS,{id:e,code:t}).then(e=>e)}};var D=()=>{const e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],o=w().multifactor,s=o.selectedMultiFactorForSigningIn,u=o.smsChallengeId,p=s.id,O=s.methodType,y=s.name,M=Object(A.a)().login,C=({code:e})=>("webauthn"===O&&(e=p),R[O].loginfn(p,e).then(()=>(M(),Object(L.a)())).then(()=>{g.c.push(r.a.Dashboard)}).catch(e=>{l(e.message)}));return Object(n.useEffect)(()=>{O===F.a.WebAuthn&&C({code:p})},[]),c.a.createElement("main",null,c.a.createElement(S.a,null,"Two Factor Authentication"),c.a.createElement(x.a,null,c.a.createElement(b.AUhintText,{text:R[O]?R[O].hint(y,u):""})),c.a.createElement(h.e,{initialValues:{code:""},validationSchema:"webauthn"!==O&&E.object().shape({code:E.string().matches(/^[0-9]*$/,"The code contains only numbers.").required("Code is required")}),onSubmit:C},()=>c.a.createElement(h.d,null,c.a.createElement(f.b,{condition:O===F.a.Sms||O===F.a.Totp},c.a.createElement(j.a,{name:"code",as:m.a,textLabel:"Code","aria-label":"Enter code",style:{width:250},maxLength:6}),c.a.createElement(d.a,{type:"submit"},a?"Try again":"Log in")),c.a.createElement(f.b,{condition:!!a&&O===F.a.WebAuthn},c.a.createElement(d.a,{type:"submit"},"Try again")))),c.a.createElement(k.a,{message:a}))},I=a(6),N=a(31),q=a(244);const U=e=>{let t=e.name,a=e.onChange,n=void 0===a?()=>{}:a,l=Object(N.a)(e,["name","onChange"]);return c.a.createElement(q.AUcheckbox,Object.assign({name:t,id:t,onChange:n},l))};var P=Object(l.g)(({history:e})=>{const t=Object(n.useState)({}),a=Object(i.a)(t,2),l=a[0],o=a[1],s=w(),m=s.multifactor.configuredMultifactorMethods,u=s.setSelectedMultifactorOption,h=Object(n.useCallback)(e=>{o(e),u(e)},[u]);return Object(n.useEffect)(()=>{1===m.length&&e.push(r.a.MultifactorAuthentication),m.forEach(e=>{e.isDefault&&h(e)})},[m,h,e]),c.a.createElement("main",null,c.a.createElement("form",null,c.a.createElement(b.AUfieldset,null,c.a.createElement(b.AUlegend,null,c.a.createElement(S.a,null,"Select a multi factor authentication method to log in"),c.a.createElement(b.AUhintText,{text:"Select your preferred Multi-Factor Authentication method"})),m.map(e=>c.a.createElement(U,{key:e.id,label:`${e.methodType} ${e.name}`,name:e.id,block:!0,checked:l===e,onClick:()=>h(e)})))),c.a.createElement(d.a,{linkComponent:I.a,link:r.a.MultifactorAuthentication},"Next"))}),$=a(2);a(407);const V=Object($.a)("login-form"),K=E.object().shape({username:E.string().required("Username is required"),password:E.string().required("Password is required")}),W=({handleSubmit:e,children:t})=>c.a.createElement(h.e,{initialValues:{username:"",password:""},onSubmit:e,validationSchema:K},({isSubmitting:e})=>c.a.createElement(h.d,{className:V("form")},c.a.createElement(j.a,{name:"username",textLabel:"Username","aria-label":"Enter username",as:m.a}),c.a.createElement(j.a,{name:"password",textLabel:"Password",type:"password","aria-label":"Enter password",as:m.a}),t,c.a.createElement(d.a,{type:"submit","data-testid":"submit-btn",disabled:e},"Log in")));a(408);const z=Object($.a)("log-in");var J=Object(l.g)(({history:e})=>{const t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],o=a[1],s=w().firstFactorLoginSuccess;return c.a.createElement("main",{className:z()},c.a.createElement(S.a,null,"Log in to Domain Names"),c.a.createElement(x.a,null,c.a.createElement(b.AUhintText,{text:"Please note: Only browsers supported for hardware security authentication are Edge 18, Firefox 71 and Chrome 78 or later."})),c.a.createElement(W,{handleSubmit:t=>{const a=t.username,n=t.password;return o(""),Object(p.g)(O.a.CommenceLogin,{username:a,password:n}).then(t=>{s(t),t.multifactorSetupRequired?e.push(r.a.SetupMultifactorAuthentication):e.push(r.a.MultifactorOptions)}).catch(e=>{o(e.message)})}}),c.a.createElement(k.a,{message:l}))}),Q=a(32),Y=a.n(Q),B=(a(409),a(175)),G=a(176);const H=Object($.a)("register-fido");var X=Object(l.g)(({history:e})=>{const t=Object(n.useState)(!1),a=Object(i.a)(t,2),l=a[0],s=a[1],m=Object(n.useState)(""),u=Object(i.a)(m,2),g=u[0],y=u[1],M=Object(A.a)().login;return c.a.createElement("main",{className:H()},c.a.createElement(S.a,null,"Multifactor Authentication - FIDO"),c.a.createElement(h.e,{initialValues:{name:"My FIDO device"},onSubmit:({name:t})=>{s(!1),Object(p.g)(O.a.CommenceRegisterFido,{yubiKeyName:t}).then(e=>Object(v.a)({publicKey:JSON.parse(e.webauthnEnrolmentString)})).then(e=>Object(p.h)(O.a.CompleteRegisterFido,{publicKeyCredential:Object(o.a)({},e,{rawId:void 0})})).then(()=>M()).then(()=>Object(L.a)()).then(()=>e.push(r.a.TermsAndConditions)).catch(e=>{y(e.message),s(!0)})},validationSchema:E.object().shape({name:E.string().required("A name is required")})},c.a.createElement(h.d,null,c.a.createElement(b.AUhintText,{text:"Use hardware security to authenticate."}),c.a.createElement(b.AUhintText,{text:"Please note: Only browsers supported for hardware security authentication are Edge 18, Firefox 71 and Chrome 78 or later."}),c.a.createElement(G.b,null,c.a.createElement(B.b,{size:3},c.a.createElement(x.a,null,c.a.createElement(j.a,{name:"name",textLabel:"Name of your FIDO device"})))),c.a.createElement(f.b,{condition:l},c.a.createElement(Y.a,{as:"error"},c.a.createElement(S.a,{level:2},g))),c.a.createElement(x.a,null,c.a.createElement(d.a,{type:"submit"},l?"Try again":"Register")))))});a(410);const Z=/^([+]\d{2})?\d{10}$/,_=Object($.a)("register-sms");var ee=Object(l.g)(({history:e})=>{const t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),g=u[0],y=u[1],M=Object(n.useState)(!1),C=Object(i.a)(M,2),T=C[0],w=C[1],v=Object(n.useState)(""),F=Object(i.a)(v,2),R=F[0],D=F[1],I=Object(A.a)().login;return c.a.createElement("main",{className:_()},c.a.createElement(S.a,null,"Multifactor Authentication - SMS"),c.a.createElement(x.a,null,c.a.createElement(b.AUhintText,{text:"Register your number for multi-factor authentication"})),c.a.createElement(f.b,{condition:T},c.a.createElement(Y.a,{as:"success"},c.a.createElement(S.a,{level:2},"SMS has been sent with ID: ",g),c.a.createElement("p",null,"An SMS has been sent to ",l,". You should receive the code in the next 30 seconds. Please enter the SMS code into the field below."),c.a.createElement("p",null,"Please check the SMS you receieved has ID ",g," before entering in the SMS code."),c.a.createElement(d.a,{className:_("resend-code-btn"),as:"tertiary",onClick:()=>w(!1)},"Resend Code"))),c.a.createElement(f.b,{condition:!T},c.a.createElement(h.e,{initialValues:{mobile:l},onSubmit:({mobile:e})=>{D(""),Object(p.g)(O.a.CommenceRegisterSMS,{name:e,phoneNumber:e}).then(t=>{y(t.id),o(e),w(!0)}).catch(()=>{})},validationSchema:E.object().shape({mobile:E.string().matches(Z,"Mobile number is not valid").required("Mobile is required")})},()=>c.a.createElement(h.d,null,c.a.createElement(j.a,{name:"mobile",textLabel:"Mobile",as:m.a,"aria-label":"Enter Mobile",placeholder:"0412345678",className:_("text-input"),maxLength:10}),c.a.createElement(d.a,{type:"submit"},"Send SMS Code")))),c.a.createElement(f.b,{condition:T},c.a.createElement(h.e,{initialValues:{code:""},onSubmit:({code:t})=>{D(""),Object(p.g)(O.a.CompleteRegisterSMS,{code:t,setDefault:!0}).then(()=>I()).then(()=>Object(L.a)()).then(()=>e.push(r.a.TermsAndConditions)).catch(e=>D(e.message))},validationSchema:E.object().shape({code:E.string().matches(/^[0-9]*$/,"The code contains only numbers.").required("SMS Code is required")})},()=>c.a.createElement(h.d,null,c.a.createElement(j.a,{name:"code",textLabel:"Enter SMS Code",as:m.a,"aria-label":"Enter SMS Code",className:_("text-input"),maxLength:6}),c.a.createElement(d.a,{type:"submit"},"Register")))),c.a.createElement(k.a,{message:R}))}),te=a(411),ae=a.n(te);var ne=Object(l.g)(({history:e})=>{const t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),g=u[0],y=u[1],M=Object(n.useState)(!1),C=Object(i.a)(M,2),T=C[0],w=C[1],v=Object(A.a)().login;return c.a.createElement("main",null,c.a.createElement(S.a,null,"Multifactor Authentication - Time-based One Time Password"),c.a.createElement(f.b,{condition:!T},c.a.createElement(G.b,null,c.a.createElement(B.b,{size:3},c.a.createElement(h.e,{initialValues:{name:"TOTP key"},onSubmit:e=>Object(p.g)(O.a.CommenceRegisterTotp,{name:e.name}).then(e=>{y(e.uri),w(!0)}).catch(e=>console.log(e)),validationSchema:E.object().shape({name:E.string().required("A name for your key is required")})},()=>c.a.createElement(h.d,null,c.a.createElement(j.a,{name:"name",as:m.a,"aria-label":"Enter name for key",textLabel:"Name of my key"}),c.a.createElement(d.a,{type:"submit"},"Next")))))),c.a.createElement(f.b,{condition:T},c.a.createElement(x.a,null,c.a.createElement(b.AUhintText,{text:"Set up your Time-based One Time Password for multi-factor authentication. Scan the QR code below with an authenticator app on your phone and enter the code below."})),c.a.createElement(x.a,null,c.a.createElement(ae.a,{value:g})),c.a.createElement(h.e,{initialValues:{code:""},onSubmit:({code:t})=>Object(p.g)(O.a.CompleteRegisterTotp,{code:t,setDefault:"true"}).then(()=>v()).then(()=>Object(L.a)()).then(()=>e.push(r.a.TermsAndConditions)).catch(e=>o(e.message)),validationSchema:E.object().shape({code:E.string().required("Code is required")})},()=>c.a.createElement(h.d,null,c.a.createElement(G.b,null,c.a.createElement(B.b,{size:3},c.a.createElement(j.a,{name:"code",as:m.a,"aria-label":"Enter Code",textLabel:"Code",maxLength:6}))),c.a.createElement(d.a,{type:"submit"},"Register")))),c.a.createElement(k.a,{message:l}))});var ce=Object(l.g)(({history:e})=>{const t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],h=m[1],E=w().multifactor.allowedMultifactorMethods,p=t=>{switch(t){case F.a.WebAuthn:e.push(r.a.RegisterFIDO);break;case F.a.Totp:e.push(r.a.RegisterTOTP);break;case F.a.Sms:e.push(r.a.RegisterSMS);break;default:h(!0)}};1===E.length&&p(E[0]);return c.a.createElement("main",null,c.a.createElement("form",null,c.a.createElement(b.AUfieldset,null,c.a.createElement(b.AUlegend,null,c.a.createElement(S.a,null,"Set up Multi-Factor Authentication"),c.a.createElement(b.AUhintText,{text:"Select your preferred Multi-Factor Authentication method"})),E.includes(F.a.WebAuthn)&&c.a.createElement(U,{label:"FIDO",name:"FIDO",block:!0,id:"cb-setupmultifactor-FIDO",checked:l===F.a.WebAuthn,onClick:()=>o(F.a.WebAuthn)}),E.includes(F.a.Totp)&&c.a.createElement(U,{label:"TOTP - Time-based One Time Password",name:"Totp",block:!0,id:"cb-setupmultifactor-Totp",checked:l===F.a.Totp,onClick:()=>o(F.a.Totp)}),E.includes(F.a.Sms)&&c.a.createElement(U,{label:"SMS",name:"Sms",block:!0,id:"cb-setupmultifactor-Sms",checked:l===F.a.Sms,onClick:()=>o(F.a.Sms)})),c.a.createElement(f.b,{condition:u},c.a.createElement(b.AUerrorText,{text:"Please select a multifactor authentication method"})),c.a.createElement(d.a,{type:"submit",onClick:e=>{e.preventDefault(),p(l)}},"Next")))});const le=()=>n.createElement(l.d,null,n.createElement(l.b,{path:r.a.RegisterFIDO,component:X}),n.createElement(l.b,{path:r.a.RegisterSMS,component:ee}),n.createElement(l.b,{path:r.a.RegisterTOTP,component:ne}),n.createElement(l.b,{path:r.a.SetupMultifactorAuthentication,component:ce}));var re=a(64),ie=a(22),oe=a(67);const se=c.a.lazy(()=>a.e(15).then(a.bind(null,456)));t.default=()=>{const e=Object(ie.a)().authDetails.shouldAcceptTermsAndConditions,t=w().multifactor.multifactorSetupRequired,a=null!==t&&t,n=null!==t&&!t;return c.a.createElement(l.d,null,c.a.createElement(l.b,{path:r.a.TermsAndConditions,render:()=>e?c.a.createElement(re.a,{render:()=>c.a.createElement(se,null)}):c.a.createElement(l.a,{to:r.a.Dashboard})}),c.a.createElement(l.b,{path:r.a.MultifactorOptions,render:()=>n?c.a.createElement(P,null):c.a.createElement(l.a,{to:r.a.Login})}),c.a.createElement(l.b,{path:r.a.MultifactorAuthentication,render:()=>n?c.a.createElement(D,null):c.a.createElement(l.a,{to:r.a.Login})}),c.a.createElement(l.b,{path:r.a.SetupMultifactorAuthentication,render:()=>a?c.a.createElement(le,null):c.a.createElement(l.a,{to:r.a.Login})}),c.a.createElement(l.b,{path:r.a.Login,render:()=>c.a.createElement(oe.a,null,c.a.createElement(J,null))}))}}}]);
//# sourceMappingURL=12.cf8a0fa6.chunk.js.map