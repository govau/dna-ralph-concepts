(this.webpackJsonpralph=this.webpackJsonpralph||[]).push([[8],{178:function(e,t,a){"use strict";let n,r;a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),function(e){e.Profile="/api/profile",e.Users="/api2/users",e.TransactionLogs="/api/transaction-logs",e.CheckPresent="/api2/users/check-present"}(n||(n={})),function(e){e.Home="/api/profile",e.TermsAndConditions="/api/profile/terms-and-conditions",e.Password="/api/profile/password"}(r||(r={}))},182:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(28),r=a(0),c=a(14);const i=e=>{const t=Object(r.useState)(void 0),a=Object(n.a)(t,2),i=a[0],l=a[1],s=Object(r.useState)(null),o=Object(n.a)(s,2),m=o[0],u=o[1],d=Object(r.useState)(!1),b=Object(n.a)(d,2),p=b[0],E=b[1],h=()=>{E(!0),Object(c.a)(e).then(e=>l(e)).catch(e=>u(e)).finally(()=>E(!1))};return Object(r.useEffect)(h,[e]),{response:i,error:m,isLoading:p,reFetch:h}}},183:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(1),r=a(46),c=a(258);const i=()=>{const e=Object(c.a)(),t=e.setRequestFn,a=e.setOnCompleteFn,i=e.setOnErrorFn;return{initiateRequest:(e,c,l)=>(t(e),l&&a(l),c&&i(c),r.c.push(`${r.c.location.pathname}${n.a.MfaAuth}`))}}},186:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),c=a(48);a(422);const i=({textLabel:e,children:t})=>r.a.createElement("div",{className:"info-group"},r.a.createElement(c.AUlabel,{text:e}),t)},188:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(449);const r=e=>{if(!e)return"";const t=new Date(`${e}`);return Object(n.a)(t,"dd/MM/yyyy HH:mm:ss")}},189:function(e,t,a){"use strict";var n=a(28),r=a(0),c=a.n(r),i=a(48),l=a(2),s=a(79),o=a.n(s),m=a(54),u=a.n(m),d=(a(423),a(29));const b=Object(l.a)("table-search-input"),p=({searchOptions:e,onChangeKey:t,onChangeText:a,placeholder:n})=>c.a.createElement("div",{className:b()},c.a.createElement(d.b,{condition:e.length>1},c.a.createElement(u.a,{className:b("select-filter"),options:e,onChange:e=>{t(e.target.value)}})),c.a.createElement(o.a,{className:b("input-filter"),placeholder:n,"aria-label":"Search",onChange:e=>a(e.target.value)}));var E=a(246),h=a(247);a(424);const g=Object(l.a)("table-pagination"),O=({currentPage:e,buttonNumber:t,onPageClick:a})=>c.a.createElement("button",{className:`${g("page-btn")}`+(e===t?" highlight":""),key:t,onClick:a},t),j=({totalPages:e,currentPage:t,onPageSelect:a})=>{const i=Object(r.useState)([]),l=Object(n.a)(i,2),s=l[0],o=l[1];return Object(r.useEffect)(()=>{let n=1,r=e;if(e<=5)n=1,r=e;else{let a=Math.floor(2.5),c=a;t<=a?(n=1,r=5):t+c>=e?(n=e-5+1,r=e):(n=t-a+1,r=t+c+1)}const i=[];for(let e=n;e<=r;e++)i.push(c.a.createElement(O,{key:e,currentPage:t+1,buttonNumber:e,onPageClick:()=>a(e-1)}));o(i)},[t,a,e]),c.a.createElement("main",{className:g()},c.a.createElement("div",{className:g("navigation-btns")},c.a.createElement("button",{className:`${g("page-btn")}`,onClick:()=>a(0)},"First"),c.a.createElement("button",{className:`${g("page-btn")}`,onClick:()=>a(t-1),disabled:!(t>0)},"Back"),s,c.a.createElement("button",{className:`${g("page-btn")}`,onClick:()=>a(t+1),disabled:!(t<e-1)},"Next"),c.a.createElement("button",{className:`${g("page-btn")}`,onClick:()=>a(e-1)},"Last")),c.a.createElement("div",null,"Page ",t+1," out of ",e))};a(425);var f=a(426),v=a.n(f);const y=(e,t)=>{if($(e)){const a=e.split("?"),r=Object(n.a)(a,2),c=r[0],i=r[1],l=new URLSearchParams(i);return v()(t,(e,t)=>{l.append(t,`${e}`)}),`${c}?${l.toString()}`}{const a=new URLSearchParams("");return v()(t,(e,t)=>{a.append(t,`${e}`)}),`${e}?${a.toString()}`}},$=e=>e.includes("?");var N=a(200);a.d(t,"a",(function(){return A}));const D=Object(l.a)("table"),A=({columns:e,endpoint:t,searchOptions:a,numRows:l=15,additionalQuery:s=""})=>{const o=Object(r.useState)(0),m=Object(n.a)(o,2),u=m[0],b=m[1],g=Object(r.useState)(a?a[0].value:null),O=Object(n.a)(g,2),f=O[0],v=O[1],A=Object(r.useState)(""),w=Object(n.a)(A,2),x=w[0],C=w[1],S=(e,a)=>{let n;return n=y(t,a?{size:l,page:e,[a.searchKey]:a.searchText}:{size:l,page:e}),`${n}${s}`},k=Object(r.useState)(a&&f?S(u,{searchKey:f,searchText:x}):S(u)),T=Object(n.a)(k,2),q=T[0],F=T[1];return Object(r.useEffect)(()=>{b(0)},[f,x,s]),Object(r.useEffect)(()=>{F(a&&f?S(u,{searchKey:f,searchText:x}):S(u))},[f,x,u,s]),c.a.createElement("div",{className:D()},c.a.createElement("div",{className:D("responsive-wrapper")},a&&c.a.createElement("section",{className:D("filter")},c.a.createElement(i.AUlabel,{text:"Search for:"}),c.a.createElement(p,{searchOptions:a,onChangeKey:v,onChangeText:C,placeholder:"Search ..."})),c.a.createElement(N.a,{endpoint:q},a=>{const r=(e=>{if($(e)){const t=e.split("?");return Object(n.a)(t,1)[0].split("/").pop()}return e.split("/").pop()})(t);if(void 0===r)return null;const i=a[r];let l,s;return i?(l=i.content,s=i.totalPages):(l=[],s=0),l.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("table",{className:`${D("au-table")} au-table au-table--striped`},c.a.createElement(E.a,{headers:e}),c.a.createElement(h.a,{data:l,columns:e})),c.a.createElement(d.b,{condition:s>1},c.a.createElement(j,{totalPages:s,currentPage:u,onPageSelect:b}))):c.a.createElement(c.a.Fragment,null,"No data")})))}},200:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(182);function r({endpoint:e,children:t}){const a=Object(n.a)(e),r=a.response,c=a.reFetch;return r?t(r,c):null}},206:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n),c=a(22),i=a(59),l=a.n(i),s=a(10);const o=({allowed:e,forbidden:t=[],redirectTo:a="",children:n})=>{const i=Object(c.a)().authDetails.roles,o=l()(i,e).length>0,m=0===l()(i,t).length;return o&&m?r.a.createElement(r.a.Fragment,null,n):""===a?null:r.a.createElement(s.a,{to:a})}},218:function(e,t,a){"use strict";let n;a.d(t,"a",(function(){return n})),function(e){e.TransactionLogs="/api2/transaction-logs"}(n||(n={}))},246:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n),c=a(298),i=a(299),l=a(301),s=a.n(l);const o=({headers:e,sort:t})=>r.a.createElement(c.AUtableHead,null,r.a.createElement(i.b,null,e.map(e=>r.a.createElement(i.a,{title:e.title,key:e.key?e.key:s()(),type:e.type,width:e.width}))))},247:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(31),r=a(0),c=a.n(r),i=a(301),l=a.n(i),s=a(288),o=a.n(s),m=a(298),u=a(299);const d=e=>{let t=e.data,a=e.type,r=e.className,i=(e.render,Object(n.a)(e,["data","type","className","render"]));return c.a.createElement("td",Object.assign({className:`au-table__cell ${r} ${"numeric"===a?"au-table__cell--numeric ":" "}`},i),t)},b=({data:e,columns:t,onSelect:a})=>{const n=(e,t)=>t.key?o()(e,t.key):t.render?t.render(e):"";return c.a.createElement(m.AUtableBody,null,e.map(e=>c.a.createElement(u.b,{key:l()(),onFocus:a&&(()=>a(e)),tabIndex:"0"},t.map(t=>c.a.createElement(d,{className:`${t.title.toLowerCase()}-cell`,key:l()(),data:n(e,t),type:t.type})))))}},258:function(e,t,a){"use strict";var n=a(19),r=a(0),c=a(24),i=a(25),l=a(18);const s=Object(l.a)({requestFn:null,onCompleteFn:()=>null,onErrorFn:()=>null});a.d(t,"a",(function(){return o}));const o=()=>{const e=Object(r.useMemo)(Object(i.a)(s),[s]);return{mfaFunctions:Object(c.useSubscription)(e),setRequestFn:e=>{s.next(Object(n.a)({},s.getValue(),{requestFn:e}))},setOnCompleteFn:e=>{s.next(Object(n.a)({},s.getValue(),{onCompleteFn:e}))},setOnErrorFn:e=>{s.next(Object(n.a)({},s.getValue(),{onErrorFn:e}))}}}},297:function(e,t,a){"use strict";a.r(t),a.d(t,"DomainsTable",(function(){return u}));var n=a(0),r=a.n(n),c=a(189),i=a(16),l=a.n(i),s=a(6),o=a(10),m=a(302);const u=({match:e,endpoint:t,columns:a=[],heading:n})=>{const i=[{title:"Domain Name",key:"name"},...a,{title:"View",render:({id:t})=>r.a.createElement(l.a,{linkComponent:s.a,link:`${e.url}/${t}`},"View Details")}];return r.a.createElement(o.d,null,r.a.createElement(o.b,{path:`${e.path}/:id`,render:e=>r.a.createElement(m.a,e)}),r.a.createElement(o.b,{render:()=>r.a.createElement("main",null,n&&n(),r.a.createElement(c.a,{columns:i,endpoint:t}))}))};t.default=u},299:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));var n=a(31),r=a(0),c=a.n(r);a(300),a(449);const i=e=>{let t=e.title,a=e.type,r=e.width,i=e.scope,l=e.className,s=e.children,o=Object(n.a)(e,["title","type","width","scope","className","children"]);return c.a.createElement("th",Object.assign({className:`au-table__header ${l}`+`${"numeric"===a?" au-table__header--numeric ":" "}`+`${r?" au-table__header--width-"+r:" "} `,scope:i},o)," ",t," ",s)},l=c.a.memo(e=>{let t=e.children,a=e.className,r=e.forwardedRef,i=Object(n.a)(e,["children","className","forwardedRef"]);return c.a.createElement("tr",Object.assign({ref:r,className:`au-table__row ${a}`},i),t)})},302:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),r=a.n(n),c=a(49),i=a(186),l=a(182);const s=({match:e})=>{const t=e.params.id,a=Object(l.a)(`${c.a.Domains}/${t}`).response;return void 0===a?null:r.a.createElement("main",null,r.a.createElement(i.a,{textLabel:"Name"},a.name),r.a.createElement(i.a,{textLabel:"Zone Name"},a.zoneName),r.a.createElement(i.a,{textLabel:"Registrant Organisation Name"},a.registrantOrganisationName))}},417:function(e,t,a){},418:function(e,t,a){},419:function(e,t,a){},420:function(e,t,a){},421:function(e,t,a){},422:function(e,t,a){},423:function(e,t,a){},424:function(e,t,a){},425:function(e,t,a){},429:function(e,t,a){},430:function(e,t,a){},431:function(e,t,a){},432:function(e,t,a){},459:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a(1),l=a(68),s=a(24),o=a(25);const m=()=>{const e=Object(n.useMemo)(Object(o.a)(l.a),[l.a]);return{hasAccepted:Object(s.useSubscription)(e),accept:()=>l.a.next(!0)}};var u=a(29),d=a(2);a(417),a(418);const b=Object(d.a)("overlay"),p=({children:e})=>r.a.createElement("div",{className:b()},e);var E=a(11),h=a(16),g=a.n(h),O=a(19),j=a(28),f=a(243),v=a(79),y=a.n(v),$=a(14),N=a(17),D=a(242),A=a(258),w=(a(419),a(46)),x=a(22),C=a(47),S=a(179),k=a(184);const T=()=>{const e=Object(n.useState)(""),t=Object(j.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),l=Object(j.a)(i,2),s=l[0],o=l[1],m=Object(A.a)().mfaFunctions,d=m.requestFn,b=m.onCompleteFn,p=m.onErrorFn,h=Object(x.a)().authDetails.configuredMultifactorMethods;let v={};h.forEach(e=>{e.isDefault&&(v=e)});const T=Object(n.useState)(v),q=Object(j.a)(T,1)[0];Object(n.useEffect)(()=>{"sms"===q.methodType&&Object($.g)(N.a.CommenceChallengeSMS,{id:q.id}).then(({id:e})=>o(e))},[q.id,q.methodType]);let F="",R="";switch(q.methodType){case f.a.WebAuthn:F="FIDO",R=`Use device ${q.name} to authenticate this request.`;break;case f.a.Totp:F="One Time Password",R=`Use one time password code on ${q.name} to authenticate this request.`;break;case f.a.Sms:F="SMS",R=`An SMS with ID: ${s} has been sent to ${q.name}`}return r.a.createElement(S.e,{initialValues:{code:""},onSubmit:e=>{const t=e.code;let a;c(""),a=q.methodType===f.a.WebAuthn?()=>Object($.g)(N.a.CommenceChallengeFido,{webauthnMFAId:q.id}).then(({webauthnChallenge:e})=>{const t=JSON.parse(e).publicKeyCredentialRequestOptions;return Object(D.b)({publicKey:Object(O.a)({},t,{extensions:void 0,allowCredentials:[{type:"public-key",id:t.allowCredentials[0].id}]})})}).then(e=>{return btoa(JSON.stringify({webauthnCommand:{id:q.id,publicKeyCredential:Object(O.a)({},e,{rawId:void 0})}}))}):q.methodType===f.a.Sms?()=>{const e=btoa(JSON.stringify({smsCommand:{id:q.id,code:t}}));return Promise.resolve(e)}:()=>{const e=btoa(JSON.stringify({totpCommand:{id:q.id,code:t}}));return Promise.resolve(e)},a().then(e=>d({"mf-token":e}).then(b).catch(e=>{p(e),w.c.goBack()})).catch(e=>{c(e.message)})}},()=>r.a.createElement(S.d,null,r.a.createElement(E.a,{level:3},R),r.a.createElement(u.b,{condition:q.methodType!==f.a.WebAuthn},r.a.createElement(k.a,{validate:e=>{let t;return e||(t="Code is required"),t},name:"code",as:y.a,textLabel:"Code","aria-label":"Enter code",style:{width:250},maxLength:6})),r.a.createElement(g.a,{type:"submit"},"Authorise with ",F),r.a.createElement(C.a,{message:a})))};var q=a(181),F=a(450);const R=Object(d.a)("mfa-modal"),P=Object(c.g)(({history:e})=>{const t=Object(A.a)().mfaFunctions.requestFn;return Object(n.useEffect)(()=>{null===t&&e.goBack()},[]),null===t?null:r.a.createElement(p,null,r.a.createElement(F.a,null,r.a.createElement("div",{className:R("container")},r.a.createElement("div",{className:R("content")},r.a.createElement(E.a,null,"Multifactor Authentication required for this request"),r.a.createElement(T,null),r.a.createElement(q.a,null,r.a.createElement(g.a,{className:R("btn",{type:"error"}),as:"tertiary",onClick:e.goBack},"Cancel request"))))))});a(420);var L=a(23);const U=Object(d.a)("security-confirmation-modal"),M=()=>{const e=m().accept,t=Object(L.a)().logout;return r.a.createElement(p,null,r.a.createElement("div",{className:U("container")},r.a.createElement("div",{className:`${U("content")} container`},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",r.a.createElement("div",{className:U("button-container")},r.a.createElement(g.a,{as:"tertiary",onClick:e},"Accept"),r.a.createElement(g.a,{as:"tertiary",className:U("button",{type:"decline"}),onClick:t},"Decline and logout")))))};var V=a(55),_=(a(421),a(186)),I=a(188),Z=a(178),z=a(206),B=a(20),J=a(200),K=a(297),G=a(49);const W=Object(d.a)("dashboard");var H=e=>{const t=Object(V.a)(),a=t.getOrgDisplayName,n=t.orgDetails,i=Object(x.a)().authDetails.userId;return r.a.createElement(J.a,{endpoint:`${Z.b.Users}/${i}`},t=>r.a.createElement(c.d,null,r.a.createElement(c.b,{render:()=>r.a.createElement("main",{className:W()},r.a.createElement(E.a,null,a()),r.a.createElement(_.a,{textLabel:"Last login"},t.previousLoginTimestamp?Object(I.a)(t.previousLoginTimestamp):"This is your first time logging in"),r.a.createElement(z.a,{allowed:[B.a.OrganisationUser,B.a.OrganisationAdmin],forbidden:[B.a.RegistrarAdmin,B.a.ZoneManagerAdmin]},r.a.createElement(K.DomainsTable,Object.assign({heading:()=>r.a.createElement(E.a,{level:2},a()," Domains"),endpoint:`${G.a.Domains}?searchOrganisationId=${n.id}`},e))))})))},Q=a(189),Y=(a(429),a(300));const X=[{title:"Date/time",render:({dateTime:e})=>Object(I.a)(e),width:"20"},{title:"User",key:"initiator.fullName",width:"20"},{title:"IP address",key:"ipAddress",width:"10"},{title:"Device/Browser",render:({userAgent:e})=>(e=>{const t=new Y.UAParser(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,t.getOS().name),r.a.createElement("div",null,t.getDevice().type),r.a.createElement("div",null,t.getBrowser().name," ",t.getBrowser().version))})(e),width:"10"},{title:"Action",key:"actionTaken"}],ee=Object(d.a)("user-activity");var te=()=>r.a.createElement("main",{className:ee()},r.a.createElement(E.a,null,"User Activity"),r.a.createElement(Q.a,{columns:X,endpoint:Z.b.TransactionLogs,searchOptions:[{value:"fullName",text:"User"},{value:"ipAddress",text:"IP Address"}]})),ae=a(6),ne=(a(430),a(183)),re=a(185),ce=a(31);const ie=e=>{let t=e.className,a=void 0===t?"":t,n=Object(ce.a)(e,["className"]);return r.a.createElement(y.a,Object.assign({as:"textarea"},n,{className:`au-text-input au-text-input--block ${a}`}))};var le=a(50);const se=Object(d.a)("create-domain");var oe;!function(e){e.domainName="name",e.comment="supportingText"}(oe||(oe={}));const me=re.object().shape({[oe.domainName]:re.string().required("A domain name is required"),[oe.comment]:re.string().required("Comment is required")}),ue=()=>{const e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),l=Object(j.a)(i,2),s=l[0],o=l[1],m=Object(n.useState)(""),d=Object(j.a)(m,2),b=d[0],p=d[1],h=Object(ne.a)().initiateRequest;return r.a.createElement("main",null,r.a.createElement(E.a,null,"Request a new domain name"),r.a.createElement(S.e,{initialValues:{[oe.domainName]:"",[oe.comment]:""},onSubmit:(e,{resetForm:t})=>{const a=Object($.d)(G.a.DomainApplications,e);h(a,e=>{p(e.message)},()=>{Object(w.b)(),o(!0),p(""),t(),c(!1)})},validationSchema:me},({values:e})=>r.a.createElement(S.d,{className:se("form")},r.a.createElement(k.a,{textLabel:"Domain name",name:oe.domainName,placeholder:"domainname.state.gov.au",onFocus:()=>{c(!1),o(!1)}}),r.a.createElement(q.a,null,r.a.createElement(g.a,{onClick:()=>(e=>{p(""),Object($.a)(`${G.a.DomainApplications}/check-available?name=${e}`).then(()=>c(!0)).catch(e=>p(e.message))})(e[oe.domainName])},"Continue")),r.a.createElement(u.b,{condition:a},r.a.createElement(k.a,{textLabel:"Business justification",name:oe.comment,as:ie}),r.a.createElement(g.a,{type:"submit"},"Send application")),r.a.createElement(C.a,{message:b}),r.a.createElement(le.a,{show:s&&!b},"Your domain has been requested and is now pending for approval"))))};var de=a(302);a(431),a(432);const be=Object(d.a)("comment-group"),pe=({comments:e})=>r.a.createElement("section",{className:be()},e.map(e=>r.a.createElement("div",{key:e.createdTimestamp,className:be("comment-box")},r.a.createElement(_.a,{textLabel:`${Object(I.a)(e.createdTimestamp)} - ${e.creatorUserName}`}),e.content)));var Ee=a(48);const he=({handleSubmit:e})=>r.a.createElement(S.e,{initialValues:{comment:""},validationSchema:re.object().shape({comment:re.string().required()}),onSubmit:e},()=>r.a.createElement(S.d,null,r.a.createElement(Ee.AUlabel,{text:"Comment"}),r.a.createElement(S.b,{name:"comment",as:ie}),r.a.createElement(g.a,{type:"submit"},"Send"))),ge=Object(d.a)("domain-request-details"),Oe=({requestDetails:e,reFetch:t})=>{const a=Object(n.useState)(""),c=Object(j.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(!1),m=Object(j.a)(o,2),u=m[0],d=m[1],b=Object(ne.a)().initiateRequest,p=()=>{s(""),d(!1)};return r.a.createElement("main",{className:ge()},r.a.createElement(S.e,{initialValues:{supportingText:e.supportingText},onSubmit:a=>{p();const n=Object($.e)(`${G.a.DomainApplications}/${e.id}`,{expectedVersion:e.version,name:e.name,supportingText:a.supportingText,status:"PENDING_ZONE_MGR_REVIEW"});b(n,e=>{s(e.message),Object(w.b)()},()=>{t&&t(),d(!0),Object(w.b)()})}},()=>r.a.createElement(S.d,null,r.a.createElement(k.a,{name:"supportingText",textLabel:"Change business justification",as:ie}),r.a.createElement(g.a,{type:"submit"},"Update"),r.a.createElement(le.a,{show:u},"Business justification updated"),r.a.createElement(C.a,{message:l}))),r.a.createElement(q.a,null,r.a.createElement(g.a,{className:"au-btn--type-error",onClick:()=>{p();const t=Object($.e)(`${G.a.DomainApplications}/${e.id}`,{expectedVersion:e.version,name:e.name,supportingText:e.supportingText,status:"CANCELLED"});b(t,e=>{s(e.message),Object(w.b)()},()=>{w.c.push(`/${i.b.Dashboard}/${i.b.MyDomains}`)})}},"Cancel application")))};var je=a(59),fe=a.n(je);const ve=Object(d.a)("domain-review-application"),ye=({requestDetails:e,reFetch:t})=>{const a=Object(n.useState)(""),c=Object(j.a)(a,2),i=c[0],l=c[1],s=Object(x.a)().authDetails.roles,o=Object(ne.a)().initiateRequest;return r.a.createElement("main",{className:ve()},r.a.createElement(z.a,{allowed:[B.a.RegistrarAdmin,B.a.ZoneManagerAdmin]},r.a.createElement(E.a,null,"Review domain application")),r.a.createElement(z.a,{allowed:[B.a.OrganisationAdmin,B.a.OrganisationUser],forbidden:[B.a.RegistrarAdmin,B.a.ZoneManagerAdmin]},r.a.createElement(E.a,null,"Domain request details")),r.a.createElement("div",{className:ve("details")},r.a.createElement(_.a,{textLabel:"Name"},e.name),r.a.createElement(_.a,{textLabel:"Applicant organisation"},e.registrantName),r.a.createElement(_.a,{textLabel:"Business justification"},e.supportingText),r.a.createElement(_.a,{textLabel:"Application submitted"},Object(I.a)(e.createTimestamp)),r.a.createElement(_.a,{textLabel:"Application submitted by"},e.createUserName,r.a.createElement("br",null),e.createUserEmail),r.a.createElement(pe,{comments:e.comments}),r.a.createElement(q.a,null,r.a.createElement(he,{handleSubmit:(a,{resetForm:n})=>{const r=fe()(s,[B.a.ZoneManagerAdmin,B.a.RegistrarAdmin]).length>0?"PENDING_REGISTRANT_REVIEW":"PENDING_ZONE_MGR_REVIEW",c=Object($.e)(`${G.a.DomainApplications}/${e.id}`,{expectedVersion:e.version,name:e.name,supportingText:e.supportingText,comment:a.comment,status:r});o(c,e=>{l(e.message)},()=>{t&&t(),n(),Object(w.b)()})}})),r.a.createElement(C.a,{message:i})),r.a.createElement(z.a,{allowed:[B.a.RegistrarAdmin,B.a.ZoneManagerAdmin]},r.a.createElement("hr",null),r.a.createElement(Ne,{requestDetails:e})),r.a.createElement(z.a,{allowed:[B.a.OrganisationAdmin,B.a.OrganisationUser],forbidden:[B.a.RegistrarAdmin,B.a.ZoneManagerAdmin]},r.a.createElement("hr",null),r.a.createElement(Oe,{requestDetails:e,reFetch:t})))};var $e;!function(e){e.Approve="APPROVED",e.Reject="REJECTED"}($e||($e={}));const Ne=({requestDetails:e})=>{const t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),s=Object(j.a)(l,2),o=s[0],m=s[1],d=Object(ne.a)().initiateRequest;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,null,r.a.createElement(g.a,{className:"au-btn--type-success",onClick:()=>m($e.Approve)},"Approve"),r.a.createElement(g.a,{className:" au-btn--type-error",onClick:()=>m($e.Reject)},"Reject")),r.a.createElement(u.b,{condition:!!o},r.a.createElement(S.e,{initialValues:{justification:""},validationSchema:re.object().shape({justification:re.string().required("Justification required")}),onSubmit:(t,{resetForm:a})=>{const n=Object($.e)(`${G.a.DomainApplications}/${e.id}`,{expectedVersion:e.version,name:e.name,supportingText:e.supportingText,comment:t.justification,status:o});d(n,e=>{i(e.message),Object(w.b)()},()=>{a(),Object(w.b)(2)})}},()=>r.a.createElement(S.d,null,r.a.createElement(k.a,{name:"justification",textLabel:"Justification for "+(o===$e.Approve?"approval":"rejection"),as:ie}),r.a.createElement(g.a,{type:"submit"},"Submit"),r.a.createElement(C.a,{message:c})))))},De=({match:e,heading:t,review:a=!1})=>{let n;return n=a?[{title:"Domain name",key:"name"},{title:"Zone",key:"zone"},{title:"Applicant organisation",key:"organisation"}]:[{title:"Domain name",key:"name"}],n=[...n,{title:"Last updated",render:e=>r.a.createElement(r.a.Fragment,null,Object(I.a)(e.lastUpdateTimestamp))},{title:"View",render:t=>r.a.createElement(g.a,{link:`${e.url}/${i.b.DomainRequest}/${t.id}`,linkComponent:ae.a},"View more")}],r.a.createElement(c.d,null,r.a.createElement(c.b,{path:`${e.path}/${i.b.DomainRequest}/:id`,render:({match:e})=>{const t=e.params.id;return r.a.createElement(J.a,{endpoint:`${G.a.DomainApplications}/${t}`},(e,t)=>r.a.createElement(ye,{requestDetails:e,reFetch:t}))}}),r.a.createElement(c.b,{render:()=>r.a.createElement(r.a.Fragment,null,t&&t(),r.a.createElement(Q.a,{endpoint:G.a.DomainApplications,columns:n}))}))},Ae=({match:e})=>{const t=Object(V.a)(),a=t.getOrgDisplayName,n=t.orgDetails.id;return r.a.createElement(c.d,null,r.a.createElement(c.b,{path:`${e.path}/${i.b.DomainRequest}/:id`,render:t=>{const a=Object(O.a)({},t,{match:e});return r.a.createElement(De,a)}}),r.a.createElement(c.b,{path:`${e.path}/${i.b.CreateDomain}`,component:ue}),r.a.createElement(c.b,{path:`${e.path}/:id`,component:de.a}),r.a.createElement(c.b,{render:t=>r.a.createElement("main",null,r.a.createElement(E.a,null,a()," Domains"),r.a.createElement(q.a,null,r.a.createElement(g.a,{linkComponent:ae.a,link:`${e.path}/${i.b.CreateDomain}`},"Create a new domain")),r.a.createElement(q.a,null,r.a.createElement(J.a,{endpoint:G.a.DomainApplications},e=>e["domain-applications"].content.length>0?r.a.createElement(De,Object.assign({heading:()=>r.a.createElement(E.a,{level:2},"Pending Domains Request")},t)):null)),r.a.createElement(K.DomainsTable,Object.assign({heading:()=>r.a.createElement(E.a,{level:2},"Domains"),endpoint:`${G.a.Domains}?searchOrganisationId=${n}`},t)))}))};var we=a(218);a.d(t,"DashboardRoutes",(function(){return Pe}));const xe=r.a.lazy(()=>a.e(9).then(a.bind(null,462))),Ce=r.a.lazy(()=>Promise.all([a.e(1),a.e(0),a.e(3),a.e(18)]).then(a.bind(null,457))),Se=r.a.lazy(()=>Promise.all([a.e(1),a.e(0)]).then(a.bind(null,451))),ke=r.a.lazy(()=>a.e(17).then(a.bind(null,458))),Te=r.a.lazy(()=>Promise.resolve().then(a.bind(null,297))),qe=r.a.lazy(()=>a.e(14).then(a.bind(null,461))),Fe=r.a.lazy(()=>a.e(16).then(a.bind(null,224))),Re=[B.a.ZoneManagerAdmin,B.a.RegistrarAdmin],Pe=({match:e})=>{const t=m().hasAccepted;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{condition:!t},r.a.createElement(M,null)),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:`${e.path}/${i.b.Users}/:id/activity`,component:te}),r.a.createElement(c.b,{path:`${e.path}/${i.b.MyProfile}`,component:xe}),r.a.createElement(c.b,{path:`${e.path}/${i.b.MyOrg}`,component:Ce}),r.a.createElement(c.b,{path:`${e.path}/${i.b.MyDomains}`,component:Ae}),r.a.createElement(c.b,{path:`${e.path}/${i.b.PendingDomains}`,render:e=>r.a.createElement(De,Object.assign({},e,{heading:()=>r.a.createElement(E.a,null,"Pending domain requests for review"),review:!0}))}),r.a.createElement(c.b,{path:`${e.path}/${i.b.Users}`,render:t=>r.a.createElement(z.a,{allowed:Re,redirectTo:e.url},r.a.createElement(Se,t))}),r.a.createElement(c.b,{path:`${e.path}/${i.b.Domains}`,render:t=>r.a.createElement(z.a,{allowed:Re,redirectTo:e.url},r.a.createElement(Te,Object.assign({endpoint:G.a.Domains,columns:[{title:"Zone name",key:"zoneName"},{title:" Registrant organisation name",key:"registrantOrganisationName"}]},t)))}),r.a.createElement(c.b,{path:`${e.path}/${i.b.Organisations}`,render:t=>r.a.createElement(z.a,{allowed:Re,redirectTo:e.url},r.a.createElement(ke,t))}),r.a.createElement(c.b,{path:`${e.path}/${i.b.Zones}`,render:t=>r.a.createElement(z.a,{allowed:Re,redirectTo:e.url},r.a.createElement(qe,t))}),r.a.createElement(c.b,{path:`${e.path}/${i.b.Transactions}`,render:e=>r.a.createElement(Fe,Object.assign({endpoint:we.a.TransactionLogs,searchOptions:[{value:"searchOrganisation",text:"Organisation"},{value:"searchUser",text:"User"},{value:"searchCommand",text:"Command"}]},e))}),r.a.createElement(c.b,{path:e.path,component:H})),r.a.createElement(c.b,{path:`/:foo*${i.a.MfaAuth}`,component:P}))};t.default=Pe}}]);
//# sourceMappingURL=8.99f99fe1.chunk.js.map