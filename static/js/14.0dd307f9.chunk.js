(this.webpackJsonpralph=this.webpackJsonpralph||[]).push([[14],{201:function(e,t,a){"use strict";let n;a.d(t,"a",(function(){return n})),function(e){e.Zones="/api2/zones"}(n||(n={}))},222:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),o=a.n(n),c=a(246),s=a(247);const r=({columns:e,data:t})=>o.a.createElement("table",{className:"table__au-table au-table"},o.a.createElement(c.a,{headers:e}),o.a.createElement(s.a,{data:t,columns:e}))},257:function(e,t,a){"use strict";let n;a.d(t,"a",(function(){return n})),function(e){e.ExpectedVersion="expectedVersion"}(n||(n={}))},447:function(e,t,a){},461:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(16),s=a.n(c),r=a(11),l=a(201),i=a(222),m=a(6),u=a(10),d=a(30),b=a(14),p=a(183),E=a(46),h=a(257),g=a(182);const O=({match:e,zones:t})=>{const a=Object(p.a)().initiateRequest,n=e.params.name;let c="",u="";t.forEach(e=>{e.name===n&&(c=e.id,u=e.version)});const O=Object(g.a)(`${d.a.Organisations}?searchAccessZoneName=${n}`),j=O.response,f=O.reFetch;if(void 0===j)return null;const v=j.organisations;return o.a.createElement("main",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},o.a.createElement(r.a,null,n),o.a.createElement(s.a,{linkComponent:m.a,link:`${e.url}/add-org-to-zone`},"Add an organisation to this zone")),o.a.createElement(i.a,{data:v.content,columns:[{title:"Name",key:"name"},{title:"Registrant name",key:"registrantName"},{title:"Action",render:({id:e})=>o.a.createElement(s.a,{onClick:()=>((e,t)=>{const n=Object(b.b)(`${l.a.Zones}/${c}/organisations/${e}?${h.a.ExpectedVersion}=${u}`);a(n,()=>{},()=>{Object(E.b)(),t()})})(e,f)},`Remove from ${n}`)}]}))};var j=a(28),f=a(31),v=a(79),$=a.n(v),k=a(2),C=(a(447),a(29));const N=Object(k.a)("search-input"),x=e=>{let t=e.options,a=e.onSelect,c=e.onChange,s=Object(f.a)(e,["options","onSelect","onChange"]);const r=Object(n.useState)(!1),l=Object(j.a)(r,2),i=l[0],m=l[1],u=Object(n.useState)(""),d=Object(j.a)(u,2),b=d[0],p=d[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement($.a,Object.assign({className:N(),onFocus:()=>m(!0),onBlur:e=>(e=>{setTimeout(()=>m(!1),100)})(),onChange:e=>{c&&c(e),p(e.target.value)},value:b,type:"search",autoComplete:"off"},s)),o.a.createElement(C.b,{condition:i},o.a.createElement("div",{className:N("options-container")},t.map(e=>o.a.createElement("option",{key:e.text,onClick:()=>(e=>{a&&a(e.value),p(e.text)})(e),className:N("option")},e.text)),!t.length&&o.a.createElement("option",{className:N("option")},"No options found."))))};var z=a(181),S=a(47),y=a(50);const w=({zones:e,match:t})=>{const a=Object(n.useState)(""),c=Object(j.a)(a,2),i=c[0],m=c[1],u=Object(n.useState)({}),h=Object(j.a)(u,2),O=h[0],f=h[1],v=Object(n.useState)(""),$=Object(j.a)(v,2),k=$[0],N=$[1],w=Object(n.useState)(!1),Z=Object(j.a)(w,2),V=Z[0],A=Z[1],R=t.params.name;let F="",q="";e.forEach(e=>{e.name===R&&(F=e.id,q=e.version)});const I=Object(p.a)().initiateRequest,J=Object(g.a)(`${d.a.Organisations}?searchName=${i}`).response;return void 0===J?null:o.a.createElement("main",null,o.a.createElement(r.a,null,"Add organisation to zone"),o.a.createElement(x,{placeholder:"Search Organisation ...",onChange:e=>{m(e.target.value)},options:J.organisations.content.map(e=>({text:e.name,value:e})),onSelect:e=>{m(e.name),f(e)},value:i}),o.a.createElement(z.a,null,o.a.createElement(s.a,{onClick:()=>{if(!O.id)return void N("No organisation selected");N(""),A(!1);const e=Object(b.e)(`${l.a.Zones}/${F}/organisations`,{expectedVersion:q,organisationId:O.id});I(e,e=>{N(e.message)},()=>{m(""),A(!0),Object(E.b)(2)})}},"Add Organisation")),o.a.createElement(C.b,{condition:V},o.a.createElement(y.a,{message:`${O.name} has successfully been added`})),o.a.createElement(S.a,{message:k}))};t.default=({match:e})=>{const t=[{title:"Zone name",key:"name",width:"80"},{title:"View",width:"20",render:({name:t})=>o.a.createElement(s.a,{linkComponent:m.a,link:`${e.path}/${t}`},"View Details")}],a=Object(g.a)(l.a.Zones).response;if(void 0===a)return null;const n=a.zones;return o.a.createElement(u.d,null,o.a.createElement(u.b,{path:`${e.path}/:name/add-org-to-zone`,render:e=>o.a.createElement(w,Object.assign({zones:n},e))}),o.a.createElement(u.b,{path:`${e.path}/:name`,render:e=>o.a.createElement(O,Object.assign({zones:n},e))}),o.a.createElement(u.b,{render:()=>o.a.createElement("main",null,o.a.createElement(r.a,null,"Zones"),o.a.createElement(i.a,{columns:t,data:n}))}))}}}]);
//# sourceMappingURL=14.0dd307f9.chunk.js.map